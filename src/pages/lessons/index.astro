---
import { getCollection } from "astro:content";
import Base from "../../layouts/Base.astro";
import Header from "../../components/Header.astro";

const lessons = await getCollection("lessons");
const sortedLessons = lessons.sort((a, b) =>
  new Date(b.data.created_at).getTime() - new Date(a.data.created_at).getTime()
);
---

<Base title="Lessons - John Jeong">
  <Header currentPage="lessons" title="Lessons" subtitle="What I learned from others" />

  <ul>
    {sortedLessons.map((lesson) => (
      <li style="margin-bottom: 1rem;">
        <a href={`/lessons/${lesson.id}`}>{lesson.data.title}</a>
        <br />
        <small style="color: #666;">
          {lesson.data.author}
          {lesson.data.type && ` Â· ${lesson.data.type}`}
        </small>
      </li>
    ))}
  </ul>
</Base>
