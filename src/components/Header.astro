---
interface Props {
  currentPage?: string;
  title?: string;
  subtitle?: string;
  showGoBack?: boolean;
}

const { currentPage, title = "John Jeong", subtitle = "Co-founder & Co-CEO at Hyprnote", showGoBack = false } = Astro.props;

const navItems = [
  { href: "/", label: "About", key: "home" },
  { href: "/essays/en", label: "Essays", key: "essays" },
  { href: "/journals", label: "Daily Logs", key: "journals" },
  { href: "/inspirations", label: "Inspirations", key: "inspirations" },
  { href: "/lessons", label: "Lessons", key: "lessons" },
];
---

<header>
  <h1>
    {currentPage ? (
      Astro.slots.has('title-extra') ? <slot name="title-extra" /> : title
    ) : (
      <a href="/">{title}</a>
    )}
  </h1>
  <p class="subtitle">{subtitle}</p>
</header>

<nav class="main-nav">
  {navItems.map((item) => (
    <div class="nav-item">
      <a href={item.href} class:list={[{ active: currentPage === item.key }]}>{item.label}</a>
      {showGoBack && currentPage === item.key && (
        <span class="go-back">Go back?</span>
      )}
    </div>
  ))}
</nav>

<style is:global>
  header {
    margin-bottom: 1rem;
  }

  header h1 {
    margin-top: 0;
  }
  header h1 a {
    text-decoration: none;
  }
  .subtitle {
    color: #666;
  }
  .main-nav {
    margin-bottom: 2rem;
    display: flex;
    gap: 1rem;
  }
  .nav-item a {
    text-decoration: none;
    color: #666;
    padding-bottom: 0.25rem;
    font-family: var(--font-mono);
    font-size: 0.8rem;
  }
  .nav-item a:hover {
    color: #1a1a1a;
  }
  .nav-item a.active {
    color: #1a1a1a !important;
    border-bottom: 2px solid #1a1a1a !important;
  }
  .nav-item {
    position: relative;
  }
  .go-back {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    font-family: var(--font-sans);
    font-size: 0.65rem;
    color: #666;
    opacity: 0.5;
    white-space: nowrap;
    margin-top: 0.25rem;
  }
</style>
